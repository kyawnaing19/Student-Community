<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Community </title>
    <!-- ------------------Custom Css link -->
    <link rel="stylesheet" href="./Assets/allfriends.css">
    <!-- ----Font Awesome  -->
    <link rel="stylesheet" href="./fontawesome-free-6.3.0-web/css/all.css">
    <!-- -------Swiper Slider Link------ -->

    <link rel="stylesheet" href="./Assets/Swiper/swiper-bundle.min.css">

</head>

<body>


    <!-- ..................Start Navbar...................... -->
    <nav>
        <div class="container nav-container">
            <div class="logo">
                <img src="/assests/Untitled-1.png" style="width: 100%; height: 50px;">
            </div>
            <div class="serch-bar">
                <i class="fa fa-search"></i>
                <input type="search" name="" id="search" placeholder="Search For Creators">
            </div>
            <div class="add-post">
                <div class="" style="width:100%;position: absolute;">


                    <a onclick="let userConfirmed = confirm('Are you sure you want to log out?'); if (userConfirmed) { window.location.href = 'logout'; }"><img title="Logout" src="/assests/OOjs_UI_icon_logOut-ltr-progressive.svg.png" alt="Logout" style="cursor:pointer;width: 30px;height:30px;"></a>
                </div>
            </div>
        </div>
    </nav>
    <!-- ...................Start Navbar................... -->


    <!-- ...................Start Main Session...................-->
    <main>
        <div class="container main-container">

            <!-- ...........Main Left Start......... -->
            <div class="main-left">

                <!--.....................  ALl friends.............. -->
            
                    <div class="friends-suggest">
                        <div class="back">
                            <a href="friends" class="back-to">
                                <i class="fa-solid fa-arrow-left"></i>
                            </a>
                        </div>
                        <div class="text">
<!--                            <span>Friends</span>-->
                            <h2>All friends</h2>
                        </div>      
                    </div>
  
                <!--.....................All friends End.............. -->

                <!-- ............Start Aside Bar for your all friends............... -->
                <aside>   

                        <div class="horizontal-line"></div>
                        <div class="cal-allfriend">
                            <p><s id="count"></s> friends</p>
                        </div>
                    
<!--                    <div class="add-friend">-->
<!--                        <div class="user" id="">-->
<!--                            <img class="user-img" src="./Assets/images/img/profile-1.jpeg" alt="">-->
<!--                            <div class="content">-->
<!--                                <h4>Name</h4>-->
<!--                                <div class="liked-by">     -->
<!--                                        <p><b>55</b> mutal friends</p>-->
<!--                                   <div class="eclipse">-->
<!--                                        <i class="fas fa-ellipsis-h"></i>-->
<!--                                   </div>  -->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="add-friend">-->
<!--                        <div class="user" id="">-->
<!--                            <img class="user-img" src="./Assets/images/img/profile-1.jpeg" alt="">-->
<!--                            <div class="content">-->
<!--                                <h4>Name</h4>-->
<!--                                <div class="liked-by">     -->
<!--                                        <p><b>55</b> mutal friends</p>-->
<!--                                   <div class="eclipse">-->
<!--                                        <i class="fas fa-ellipsis-h"></i>-->
<!--                                   </div>  -->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->
                    <div class="add-friend" id="friends">
                    </div>

    <!--                    <div class="add-friend">-->
    <!--                        <div class="user" id="">-->
    <!--                            <img class="user-img" src="./Assets/images/img/profile-1.jpeg" alt="">-->
    <!--                            <div class="content">-->
    <!--                                <h4>Name</h4>-->
    <!--                                <div class="liked-by">     -->
    <!--                                        <p><b>55</b> mutal friends</p>-->
    <!--                                   <div class="eclipse">-->
    <!--                                        <i class="fas fa-ellipsis-h"></i>-->
    <!--                                   </div>  -->
    <!--                                </div>-->
    <!--                            </div>-->
    <!--                        </div>-->
    <!--                    </div>-->

<!--                    <div class="add-friend">-->
<!--                        <div class="user" id="">-->
<!--                            <img class="user-img" src="./Assets/images/img/profile-1.jpeg" alt="">-->
<!--                            <div class="content">-->
<!--                                <h4>Name</h4>-->
<!--                                <div class="liked-by">     -->
<!--                                        <p><b>55</b> mutal friends</p>-->
<!--                                   <div class="eclipse">-->
<!--                                        <i class="fas fa-ellipsis-h"></i>-->
<!--                                   </div>  -->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="add-friend">-->
<!--                        <div class="user" id="">-->
<!--                            <img class="user-img" src="./Assets/images/img/profile-1.jpeg" alt="">-->
<!--                            <div class="content">-->
<!--                                <h4>Name</h4>-->
<!--                                <div class="liked-by">     -->
<!--                                        <p><b>55</b> mutal friends</p>-->
<!--                                   <div class="eclipse">-->
<!--                                        <i class="fas fa-ellipsis-h"></i>-->
<!--                                   </div>  -->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

<!--                    <div class="add-friend">-->
<!--                        <div class="user" id="">-->
<!--                            <img class="user-img" src="./Assets/images/img/profile-1.jpeg" alt="">-->
<!--                            <div class="content">-->
<!--                                <h4>Name</h4>-->
<!--                                <div class="liked-by">     -->
<!--                                        <p><b>55</b> mutal friends</p>-->
<!--                                   <div class="eclipse">-->
<!--                                        <i class="fas fa-ellipsis-h"></i>-->
<!--                                   </div>  -->
<!--                                </div>-->
<!--                            </div>-->
<!--                        </div>-->
<!--                    </div>-->

                    
                </aside>

                <!-- ............End Aside Bar............... -->

            </div>
            <!-- ...........Main Left End......... -->



            <!--======================Main Middle Start====================== -->

        
    </main>
    <!-- ...................End Main Session................... -->




    <!-- -----------------------Start PopUps Aria----------------- -->
    <!-- ----------Start Profile-Popup------------- -->
    <div class="popup profile-popup">
        <div>
            <div class="popup-box profile-popup-box">
                <h1>Aung Khaing Moe</h1>
                <p>@aungkhaingmoe</p>
                <div id="my-profile-picture">
                    <img src="./Assets/images/img/profile-1.jpeg">
                </div>
                <label for="profile-upload" class="btn btn-primary btn-lg"><a href="profile.html" style="text-decoration: none; color: aliceblue; font-weight: bolder;">View Profile Details</a></label>
                <!-- <input type="file" name="" accept="image/jpg , image/png, image/jpep" id="profile-upload"> -->
                <button class="btn btn-primary btn-lg">Log Out</button>
            </div>
            <span class="close"><i class="fa fa-close"></i></span>
        </div>
    </div>
    <!-- ----------End Profile-Popup------------- -->

    <!-- -----------------------End PopUps Aria----------------- -->


    <!-- ----------------Swiper JS---------------------- -->

    <script src="./Assets/Swiper/swiper-bundle.min.js"></script>
    <!-- Custom Js Link -->
    <script src="./Assets/Script.js"></script>
    <script src="assests/js/jquery.min.js"></script>
<script>
    var id=sessionStorage.getItem("id");
    $.get('/friend/getFriends', { id: id }, function(response) {
        if (Array.isArray(response)) {
            var usersContainer = $('#friends');
            usersContainer.empty(); // Clear any existing content
var count=0;
            response.forEach(function(user) {

                count++;

                var userDiv = `

                        <div class="user" id="">
                            ${user.profile ? `<img class="user-img" src="/files/${user.profile}" alt="">` : `<img class="user-img" src="/assests/noprofile.jpg" alt="">`}
                            <div onclick="window.location.href='profile?otheremail=${user.email}&otherid=${user.id}'" class="content">
                                <h4>${user.name}</h4>
                                <div class="liked-by">
                                        <p><b>55</b> mutal friends</p>
                                   <div class="eclipse">
                                        <i class="fas fa-ellipsis-h"></i>
                                   </div>
                                </div>
                            </div>
                        </div>


                    `;

                usersContainer.append(userDiv);
            });
            $('#count').text(count);
            console.log(count);
        } else {
            console.log('Response is not an array:', response);
        }
    }).fail(function(xhr, status, error) {
        alert('Request failed: ' + error);
    });
</script>
<!--serch-->
    <script>
        document.getElementById('search').addEventListener('keydown', function (event) {
            if (event.key === 'Enter') {
                event.preventDefault(); // Prevent the default action (form submission)
                // Perform your action here
                const searchValue = event.target.value;
                console.log('Search value:', searchValue);
                // You can call a function or redirect to a search results page, for example
                window.location.href = `/search?query=${searchValue}`;
            }
        });
    </script>
    <!--serch-->
</body>

</html>